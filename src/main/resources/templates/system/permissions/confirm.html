<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{common/layout}" th:with="title='権限管理'">
<body>
	<!-- start: contents -->
	<div layout:fragment="main_contents" th:object="${permissionsDetailForm}">
		<!-- PAGE CONTENT WRAPPER -->
		<div class="page-content-wrap form-horizontal">
			<div class="row">
				<div class="col-md-12">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">
								<strong th:text="権限__*{dispMode.text}__確認">権限登録確認</strong>
							</h3>
						</div>

						<!-- START メッセージ表示部 -->
						<div th:replace="~{common/message :: common_message_box('success',${successMessages})}"></div>
						<div th:replace="~{common/message :: common_message_box('danger',${errorMessages})}"></div>
						<div th:replace="~{common/message :: common_message_box('warning',${warningMessages})}"></div>
						<!-- END メッセージ表示部 -->

						<table class="table">
							<tr>
								<th style="width: 50px;"><span class="label-important">必須</span></th>
								<th style="width: 100px;">権限名</th>
								<td style="text-align: left;">
									<input type="text" style="width: 450px;" maxlength="256" autocomplete="off" name="permRoleName" th:value="*{permRoleName}" disabled />
								</td>
							</tr>
							<tr class="top-permission" th:each="topMenu, tp : ${permissionsList}">
								<th style="width: 50px;"><span class="label-important">必須</span></th>
								<th style="width: 80px;">
									<label th:text="${topMenu.menuName}"><i class="fa fa-bars" aria-hidden="true"></i>TopName</label>
									<input type="hidden" th:name="topMenuList[__${tp.index}__].menuName" th:value="${topMenu.menuName}"/>
								</th>
								<td style="text-align: left;">
									<table class="search-results-tbl">
										<thead>
										<tr>
											<th style="width: 30%;">業務画面名</th>
											<th>権限</th>
										</tr>
										</thead>
										<tbody>
										<tr th:each="subMenu, sp : ${topMenu.subMenuList}">
											<td th:text="${subMenu.menuName}">管理メニュー</td>
											<td>
												<div class="detail-permission" style="display: flex; justify-content: flex-start; gap: 20px;" >
													<input type="hidden" class="menu-id" th:value="${subMenu.menuId}"/>
													<input type="hidden" class="menu-name" th:value="${subMenu.menuName}"/>
													<input type="hidden" class="menu-code" th:value="${subMenu.menuCode}"/>
													<label class="inner-title"><input type="checkbox" class="read-perm" th:checked="${subMenu.readPermFlg} neq null and ${subMenu.readPermFlg} eq 1" disabled/>権限_参照</label>
													<label class="inner-title"><input type="checkbox" class="write-perm" th:checked="${subMenu.writePermFlg} neq null and ${subMenu.writePermFlg} eq 1" disabled/>権限_書込み</label>
													<label class="inner-title"><input type="checkbox" class="download-perm" th:checked="${subMenu.downloadPermFlg} neq null and ${subMenu.downloadPermFlg} eq 1" disabled/>権限_帳票DL</label>
												</div>
											</td>
										</tr>
										</tbody>
									</table>
								</td>
							</tr>
						</table>
						<div class="panel-footer">
							<form class="form-horizontal" method="post" th:action="@{#}">
			                <input type="hidden" name="originSessionKey" th:value="*{sessionKey}">
                          <input type="hidden" th:field="*{page}">
								<div class="pull-right">
									<a th:if="*{dispMode.value} eq '3'" th:href="'/system/permissions/' + *{page} + '/'" class=" btn btn-default">戻る</a>
									<button th:if="*{dispMode.value} neq '3'" th:formaction="@{/system/permissions/detail/back/}"
											class="btn btn-default double-click">戻る</button>
									<button th:if="*{dispMode.value} neq '3'" class="btn btn-primary double-click"
											th:formaction="@{/system/permissions/detail/register/}" th:text="*{dispMode.value} neq '1' ? '登録':'変更'">登録</button>
								</div>
			              </form>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- END PAGE CONTENT WRAPPER -->
		<th:block th:insert="~{common/script :: common_script}"></th:block>
		<style>
			table, th, td {
				border: 1px solid #ccc;
				border-collapse: collapse;
			}

			th, td {
				padding: 8px;
				vertical-align: top;
			}

			.search-results-tbl tbody tr:nth-child(even) {
				background-color: #f9f1e6;
			}

			.search-results-tbl thead {
				background-color: #f2f2f2;
			}

			.table > tbody > tr > th {
				background-color: #f5f5f5;
				text-align: center;
			}

			.search-results-tbl {
				width: 100%;
				table-layout: fixed;
			}

			.table {
				width: 70%;
				table-layout: fixed;
			}

			.label-important {
				background-color: #d9534f;
				color: white;
				padding: 4px 4px;
				display: inline-block;
				border-radius: 4px;
				font-size: 12px;
			}
		</style>
	</div>
	<!-- end: contents -->

</body>
</html>
